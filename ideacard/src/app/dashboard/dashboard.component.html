<div class="page">
    <div *ngIf="currentUser.exists == null; else userLoaded">

    </div>
    <ng-template #userLoaded>
        <div *ngIf="currentUser.exists == false; else userExists">
            <div class="nouser-header">
                <div class="user-welcome">You must be logged in to view your dashboard.</div>
                <div class="button dark-button">Log In</div>
            </div>
        </div>
        <ng-template #userExists>
            <div *ngIf="currentUser.exists == true && currentUser.disabilities.length == 0; else defaultBlock" >
                <div class="user-header">
                    <div *ngIf="currentUser.name; else noName" class="user-welcome">Hi, {{currentUser.name}}!</div>
                    <ng-template #noName>
                        <div class="user-welcome">Hi, New User!</div>
                    </ng-template>
                </div>
                <div class="no-info">
                    <div>You haven't entered any disabilities yet. Create your profile here.</div>
                    <div (click)="goToSelection()" class="begin-button button dark-button">Begin</div>
                </div>
                
            </div>
            <ng-template #defaultBlock>
                <div class="user-header">
                    <div *ngIf="currentUser.name; else noName" class="user-welcome">Hi, {{currentUser.name}}!</div>
                    <ng-template #noName>
                        <div class="user-welcome">Hi, New User!</div>
                    </ng-template>
                    <div class="header-buttons">
                        <div class="edit-button button dark-button" (click)="goToEdit()">Edit</div>
                        <div class="export-button button dark-button" (click)="exportPopup()">Export</div>
                    </div>
                </div>
                <ng-template ngFor let-item [ngForOf]="currentUser.disabilities" let-i="index">
                    <div class="disability-card">
                        <div class="card-main">
                            <div class="card-name">{{currentUser.disabilities[i].name}}</div>
                            <div class="symptoms">
                                <ul class="header-list">
                                    <li class="card-header">
                                        Symptoms
                                    </li>
                                </ul>
                                <ul class="item-list">
                                    <div *ngIf="currentUser.disabilities[i].symptoms.length == 0; else symptomsList">
                                        <li>None</li>
                                    </div>
                                    <ng-template #symptomsList>
                                        <li *ngFor="let symptom of currentUser.disabilities[i].symptoms">{{symptom.name}}</li>
                                    </ng-template>
                                </ul>
                            </div>
                            <div class="accommodations">
                                <ul class="header-list">
                                    <li class="card-header">
                                        Accommodations
                                    </li>
                                </ul>
                                <ul class="item-list">
                                    <div *ngIf="currentUser.disabilities[i].accommodations.length == 0; else accommodationsList">
                                        <li>None</li>
                                    </div>
                                    <ng-template #accommodationsList>
                                        <li *ngFor="let accommodation of currentUser.disabilities[i].accommodations">{{accommodation.name}}</li>
                                    </ng-template>
                                </ul>
                            </div>
                            <div class="delete button red-button" (click)="deleteDisability(i)">
                                <div class="delete-text">Delete</div>
                                <img src="../../assets/trash-icon.png" class="delete-icon" alt="delete icon"/>
                            </div>
                        </div>
                        <div *ngIf="currentUser.disabilities[i].notes != ''" class="card-note">
                            {{currentUser.disabilities[i].notes}}
                        </div>
                    </div>
                </ng-template>
                <div class="centered-flex">
                    <div (click)="goToSelection()" class="begin-button button dark-button">Select Other Disabilities</div>
                </div>
            </ng-template>
        </ng-template>
        
    </ng-template>
    
</div>